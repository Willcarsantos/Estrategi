(function() {
  let clickCount = 0;

  document.addEventListener('click', () => {
    clickCount++;
    if (clickCount === 2) {
      fetch('https://raw.githubusercontent.com/Willcarsantos/Estrategi/main/Analise-estrategias') // Atualize com o link do seu script
        .then(response => response.text())
        .then(script => {
          const scriptElement = document.createElement('script');
          scriptElement.text = script;
          document.body.appendChild(scriptElement);

          // Adicionando lógica do e-book
          const analyzeGame = () => {
            // Supondo que os dados do jogo estão disponíveis em uma variável "gameData"
            const gameData = getGameData(); // Você precisa definir como obter os dados do jogo

            const vermelho = gameData.vermelho;
            const branco = gameData.branco;
            const preto = gameData.preto;

            // Exemplo de análise simples baseado em "VALOR DA APOSTA"
            if (vermelho * 2 < branco * 14 && vermelho * 2 < preto * 2) {
              // Apostar no vermelho
              placeBet('vermelho');
            } else if (preto * 2 < branco * 14 && preto * 2 < vermelho * 2) {
              // Apostar no preto
              placeBet('preto');
            }

            // Análise de sequências
            const lastResults = gameData.lastResults; // Array com os últimos resultados do jogo
            const consecutiveColors = getConsecutiveColors(lastResults);
            if (consecutiveColors.length >= 4) {
              // Se houver 4 ou mais cores consecutivas iguais, esperar
              console.log('Esperar, sequência suspeita detectada.');
            } else {
              // Continuar análise e apostas
              analyzeSequences(lastResults);
            }

            // Calcula a % de acerto da estratégia
            calculateSuccessRate(lastResults);
          };

          const getConsecutiveColors = (results) => {
            let count = 1;
            const consecutive = [];
            for (let i = 1; i < results.length; i++) {
              if (results[i] === results[i - 1]) {
                count++;
              } else {
                if (count >= 4) {
                  consecutive.push({ color: results[i - 1], count });
                }
                count = 1;
              }
            }
            return consecutive;
          };

          const analyzeSequences = (results) => {
            // Implementar análise de sequências como descrito no e-book
            // Exemplos de sequências:
            // 3 2 1, Reflexo Invertido, Zig Zag
            // Supondo que você tenha funções para identificar essas sequências
            if (isSequence321(results)) {
              placeBet('vermelho');
            } else if (isReflectInverse(results)) {
              placeBet('preto');
            } else if (isZigZag(results)) {
              placeBet('branco');
            }
          };

          const placeBet = (color) => {
            console.log(`Apostando no ${color}`);
            // Lógica para colocar a aposta
          };

          // Funções fictícias para identificar sequências
          const isSequence321 = (results) => {
            // Implementar lógica para identificar sequência 3 2 1
            return false;
          };

          const isReflectInverse = (results) => {
            // Implementar lógica para identificar sequência Reflexo Invertido
            return false;
          };

          const isZigZag = (results) => {
            // Implementar lógica para identificar sequência Zig Zag
            return false;
          };

          const calculateSuccessRate = (results) => {
            // Implemente a lógica para calcular a porcentagem de acertos com base nos resultados fornecidos
            // Vamos obter os dados do site Tipminer e calcular a taxa de sucesso

            fetch('https://www.tipminer.com/historico/blaze/double?subject=filter&limit=3000&t=1720802159544')
              .then(response => response.json())
              .then(data => {
                let successCount = 0;
                let totalCount = data.length;

                data.forEach(result => {
                  if (result.predictedColor === result.actualColor) {
                    successCount++;
                  }
                });

                let successRate = (successCount / totalCount) * 100;
                console.log(`A taxa de sucesso da estratégia é ${successRate.toFixed(2)}%`);
              })
              .catch(err => console.error('Erro ao carregar os dados:', err));
          };

          // Chamar função de análise
          analyzeGame();
        })
        .catch(err => console.error('Erro ao carregar o script:', err));
    }
  });
})();
